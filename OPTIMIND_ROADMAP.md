# OptiMind - Roadmap de Desenvolvimento

## üéØ Vis√£o Geral

Este roadmap divide o desenvolvimento do OptiMind em **blocos l√≥gicos e test√°veis**, permitindo valida√ß√£o incremental e deploy cont√≠nuo. Cada bloco deve ser **completamente funcional** antes de avan√ßar para o pr√≥ximo.

---

## üìã Bloco 1: Funda√ß√£o B√°sica (Semana 1)

### üéØ Objetivo
Criar a base m√≠nima funcional com autentica√ß√£o robusta, configura√ß√£o e deploy.

### üîí Melhorias de Seguran√ßa Implementadas
- **Senhas seguras**: Hash bcrypt com salt autom√°tico
- **Valida√ß√£o de for√ßa**: 12+ caracteres, mai√∫sculas, min√∫sculas, n√∫meros, s√≠mbolos
- **Rate limiting**: 5 tentativas por IP, bloqueio de 5 minutos
- **Logs de seguran√ßa**: Rastreamento de tentativas de login
- **Prote√ß√£o de arquivos**: users.json, login_attempts.json, SECURITY.md n√£o commitados
- **Script de gerenciamento**: setup_dev_credentials.py para credenciais seguras

### üìù Tarefas

#### 1.1 Setup do Projeto
- [x] Criar reposit√≥rio Git
- [x] Configurar ambiente virtual Python 3.9+
- [x] Criar estrutura de pastas b√°sica
- [x] Configurar `.gitignore`

#### 1.2 Autentica√ß√£o B√°sica ‚úÖ **CONCLU√çDO**
- [x] Instalar `streamlit-authenticator` v0.4.2
- [x] Criar p√°gina de login funcional
- [x] Implementar verifica√ß√£o de credenciais
- [x] Testar fluxo de autentica√ß√£o
- [x] Implementar sistema de senhas seguras (bcrypt)
- [x] Adicionar valida√ß√£o de for√ßa de senha
- [x] Implementar rate limiting (5 tentativas por IP)
- [x] Adicionar logs de tentativas de login
- [x] Proteger arquivos sens√≠veis (.gitignore)
- [x] Criar script de gerenciamento de credenciais
- [x] Corrigir compatibilidade com streamlit-authenticator v0.4.2
- [x] Implementar estrutura correta (cookie_key, session_state)
- [x] Testar login/logout completo

#### 1.2.1 Testes Robustos de Autentica√ß√£o ‚úÖ **CONCLU√çDO**
- [x] Criar suite completa de testes (`tests/test_auth.py`)
- [x] Implementar testes unit√°rios para todas as funcionalidades
- [x] Testar hash e verifica√ß√£o de senhas (bcrypt)
- [x] Testar valida√ß√£o de for√ßa de senha (12+ chars, mai√∫sculas, min√∫sculas, n√∫meros, s√≠mbolos)
- [x] Testar cria√ß√£o e remo√ß√£o de usu√°rios
- [x] Testar rate limiting (5 tentativas por IP, bloqueio de 5 minutos)
- [x] Testar obten√ß√£o e listagem de usu√°rios
- [x] Testar integra√ß√£o com Streamlit (mocks)
- [x] Criar script de execu√ß√£o de testes (`run_tests.py`)
- [x] Implementar testes com fixtures pytest para ambiente limpo
- [x] Garantir 100% de cobertura das funcionalidades cr√≠ticas
- [x] Validar que testes usam as mesmas fun√ß√µes do app real
- [x] **Resultado**: 11 testes passando, 3 pulados (integra√ß√£o Streamlit)

#### 1.3 P√°gina Inicial ‚úÖ **CONCLU√çDO**
- [x] Criar p√°gina Home com descri√ß√£o do OptiMind
- [x] Adicionar bot√£o "Novo Job" (ainda n√£o funcional)
- [x] Implementar design moderno e light em ingl√™s
- [x] Implementar Golden Circle (Why/How/What)
- [x] Adicionar casos de uso em consultoria
- [x] Incluir algoritmos t√©cnicos detalhados
- [x] Explicar arquitetura t√©cnica e agentes
- [x] Adicionar logo centralizado no final
- [x] **Implementar storytelling focado na dor dos consultores**
- [x] **Adicionar casos de sucesso da Mirow Co com m√©tricas reais**
- [x] **Mostrar simplicidade para usu√°rio vs complexidade interna**
- [x] **Destacar problemas PhD-level resolvidos**
- [x] **Incluir mensagem de democratiza√ß√£o de solu√ß√µes avan√ßadas**
- [x] Implementar sidebar bonito e funcional
- [x] Adicionar header com nome do app (OptiMind)
- [x] Implementar navega√ß√£o principal (Home, Novo Job, Hist√≥rico)
- [x] Implementar bot√£o de logout funcional
- [x] Adicionar footer com branding Mirow & Co.
- [x] Aplicar CSS customizado para design moderno
- [x] Integrar sidebar em todas as p√°ginas principais
- [x] Testar funcionalidade de logout
- [x] Validar navega√ß√£o entre se√ß√µes
- [X] Gestao de usuario para adicionar e retirar user quando for admin

#### 1.4 Configura√ß√£o de Secrets
- [x] Configurar `.streamlit/secrets.toml`
- [x] Implementar valida√ß√£o da chave OpenAI
- [x] Testar conex√£o com OpenAI API
- [x] Configurar rate limiting b√°sico

#### 1.5 Deploy Inicial
- [x] Criar `requirements.txt` b√°sico
- [x] Configurar `.streamlit/config.toml`
- [ ] Deploy no Streamlit Community Cloud
- [ ] Configurar secrets na Cloud
- [ ] Testar deploy completo

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
# Testes para validar Bloco 1
def test_bloco_1():
    # 1. Autentica√ß√£o funciona
    assert login_successful("admin", "password") == True
    assert login_failed("wrong", "credentials") == False
    
    # 2. Seguran√ßa implementada
    assert password_strength_validation_works() == True
    assert rate_limiting_works() == True
    assert sensitive_files_protected() == True
    
    # 3. Secrets configurados
    assert openai_api_key_is_valid() == True
    assert secrets_not_exposed_in_frontend() == True
    
    # 4. Deploy funcional
    assert app_loads_without_errors() == True
    assert authentication_works_in_production() == True
    
    # 5. Testes robustos implementados ‚úÖ
    assert run_tests() == "11 passed, 3 skipped"  # python run_tests.py
    assert test_coverage_auth() == "100%"  # Todas funcionalidades cr√≠ticas testadas
    assert tests_use_real_functions() == True  # Testes usam c√≥digo real do app
```

### üöÄ Resultado Esperado
- Site b√°sico funcionando com login seguro
- Sistema de autentica√ß√£o robusto com rate limiting
- Senhas seguras com valida√ß√£o de for√ßa
- Arquivos sens√≠veis protegidos
- Chave OpenAI validada e funcionando
- Deploy no Streamlit Cloud operacional
- **Suite completa de testes robustos** (11 testes passando)
- **Cobertura 100% das funcionalidades cr√≠ticas**
- **Testes validam c√≥digo real do app**
- Base s√≥lida para pr√≥ximos blocos

---

## üìã Bloco 2: Interface de Entrada (Semana 2)

### üéØ Objetivo
Implementar interface para entrada de problemas de otimiza√ß√£o.

### üìù Tarefas

#### 2.1 P√°gina de Defini√ß√£o de Problema
- [ ] Criar formul√°rio de entrada de texto
- [ ] Adicionar sele√ß√£o Maximizar/Minimizar
- [ ] Implementar valida√ß√£o b√°sica de input
- [ ] Adicionar exemplos e placeholder

#### 2.2 Navega√ß√£o entre P√°ginas
- [ ] Implementar sistema de p√°ginas Streamlit
- [ ] Criar fluxo: Home ‚Üí Novo Job ‚Üí Defini√ß√£o
- [ ] Adicionar breadcrumbs/navega√ß√£o
- [ ] Testar transi√ß√µes entre p√°ginas

#### 2.3 Valida√ß√£o de Input
- [ ] Implementar valida√ß√£o de texto n√£o vazio
- [ ] Detectar palavras-chave (maximizar, minimizar)
- [ ] Validar formato b√°sico do problema
- [ ] Mostrar mensagens de erro amig√°veis

#### 2.4 Estado da Aplica√ß√£o
- [ ] Implementar `st.session_state` para dados
- [ ] Persistir dados entre p√°ginas
- [ ] Limpar estado ao iniciar novo job
- [ ] Testar persist√™ncia de dados

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_2():
    # 1. Interface de entrada funciona
    assert can_input_problem_text() == True
    assert can_select_maximize_minimize() == True
    
    # 2. Valida√ß√£o funciona
    assert validates_empty_input() == True
    assert validates_optimization_keywords() == True
    
    # 3. Navega√ß√£o funciona
    assert can_navigate_between_pages() == True
    assert state_persists_between_pages() == True
```

### üöÄ Resultado Esperado
- Interface completa para entrada de problemas
- Valida√ß√£o b√°sica funcionando
- Navega√ß√£o fluida entre p√°ginas
- Estado da aplica√ß√£o gerenciado

---

## üìã Bloco 3: Agente Meaning (Semana 3)

### üéØ Objetivo
Implementar o primeiro agente que interpreta problemas de otimiza√ß√£o.

### üìù Tarefas

#### 3.1 Estrutura de Agentes
- [ ] Criar pasta `agents/`
- [ ] Implementar classe base `BaseAgent`
- [ ] Configurar PraisonAI b√°sico
- [ ] Testar conex√£o com OpenAI

#### 3.2 Agente Meaning
- [ ] Implementar `MeaningAgent`
- [ ] Criar prompt espec√≠fico para interpreta√ß√£o
- [ ] Implementar valida√ß√£o de JSON de sa√≠da
- [ ] Testar com problemas simples

#### 3.3 Schemas JSON
- [ ] Criar pasta `schemas/`
- [ ] Implementar `problem_schema.json`
- [ ] Criar validador JSON
- [ ] Testar valida√ß√£o de schemas

#### 3.4 Integra√ß√£o com UI
- [ ] Conectar formul√°rio ao agente
- [ ] Mostrar resultado da interpreta√ß√£o
- [ ] Implementar feedback visual
- [ ] Adicionar loading states

#### 3.5 Tratamento de Erros
- [ ] Implementar fallback para problemas inv√°lidos
- [ ] Criar mensagens de erro amig√°veis
- [ ] Testar cen√°rios de falha
- [ ] Implementar retry b√°sico

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_3():
    # 1. Agente funciona
    assert agent_understands_valid_problem() == True
    assert agent_rejects_invalid_input() == True
    
    # 2. JSON v√°lido
    assert output_matches_schema() == True
    assert json_validation_works() == True
    
    # 3. UI integrada
    assert can_submit_problem_to_agent() == True
    assert shows_interpretation_result() == True
    assert handles_errors_gracefully() == True
```

### üöÄ Resultado Esperado
- Agente Meaning funcionando
- Interpreta√ß√£o correta de problemas v√°lidos
- Rejei√ß√£o adequada de problemas inv√°lidos
- Interface integrada com feedback

---

## üìã Bloco 4: Revis√£o e Confirma√ß√£o (Semana 4)

### üéØ Objetivo
Implementar etapa de revis√£o onde usu√°rio confirma interpreta√ß√£o.

### üìù Tarefas

#### 4.1 P√°gina de Revis√£o
- [ ] Criar p√°gina de revis√£o do problema
- [ ] Mostrar interpreta√ß√£o do agente
- [ ] Exibir JSON estruturado (colaps√°vel)
- [ ] Implementar bot√µes Confirmar/Editar

#### 4.2 Formata√ß√£o de Sa√≠da
- [ ] Formatar interpreta√ß√£o de forma amig√°vel
- [ ] Destacar vari√°veis, objetivo e restri√ß√µes
- [ ] Implementar visualiza√ß√£o JSON bonita
- [ ] Adicionar tooltips explicativos

#### 4.3 Fluxo de Confirma√ß√£o
- [ ] Implementar confirma√ß√£o do usu√°rio
- [ ] Permitir edi√ß√£o e reenvio
- [ ] Salvar problema confirmado
- [ ] Transicionar para pr√≥ximo est√°gio

#### 4.4 Valida√ß√£o de Confirma√ß√£o
- [ ] Validar que usu√°rio confirmou
- [ ] Implementar timeout de confirma√ß√£o
- [ ] Permitir cancelamento
- [ ] Testar fluxo completo

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_4():
    # 1. Revis√£o funciona
    assert shows_interpretation_clearly() == True
    assert json_display_is_collapsible() == True
    
    # 2. Confirma√ß√£o funciona
    assert can_confirm_problem() == True
    assert can_edit_and_resubmit() == True
    
    # 3. Fluxo completo
    assert problem_confirmed_saves_to_state() == True
    assert can_proceed_to_next_stage() == True
```

### üöÄ Resultado Esperado
- Interface de revis√£o clara e intuitiva
- Confirma√ß√£o/edi√ß√£o funcionando
- Fluxo completo at√© confirma√ß√£o
- Base para pipeline de agentes

---

## üìã Bloco 5: Pipeline de Agentes (Semana 5-6)

### üéØ Objetivo
Implementar pipeline completo dos 7 agentes com orquestra√ß√£o.

### üìù Tarefas

#### 5.1 MetaManager e MCP
- [ ] Implementar `MetaManager` b√°sico
- [ ] Criar sistema MCP simples
- [ ] Implementar controle de fluxo
- [ ] Testar orquestra√ß√£o b√°sica

#### 5.2 Agentes Restantes
- [ ] Implementar `PesquisadorAgent`
- [ ] Implementar `MatematicoAgent`
- [ ] Implementar `FormuladorAgent`
- [ ] Implementar `ExecutorAgent`
- [ ] Implementar `InterpretadorAgent`
- [ ] Implementar `AuditorAgent`

#### 5.3 Schemas Completos
- [ ] Criar todos os schemas JSON
- [ ] Implementar validadores
- [ ] Testar valida√ß√£o em cada etapa
- [ ] Documentar schemas

#### 5.4 Prompts Especializados
- [ ] Criar prompts para cada agente
- [ ] Testar prompts com exemplos
- [ ] Otimizar prompts baseado em testes
- [ ] Documentar prompts

#### 5.5 Integra√ß√£o Pyomo
- [ ] Configurar Pyomo e solvers
- [ ] Testar execu√ß√£o de c√≥digo Pyomo
- [ ] Implementar sandbox de execu√ß√£o
- [ ] Validar resultados

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_5():
    # 1. Pipeline completo
    assert all_agents_execute_sequentially() == True
    assert pipeline_produces_valid_result() == True
    
    # 2. Valida√ß√£o em cada etapa
    assert each_stage_validates_output() == True
    assert schemas_are_enforced() == True
    
    # 3. Pyomo funciona
    assert can_solve_simple_lp() == True
    assert can_solve_simple_mip() == True
    assert execution_is_sandboxed() == True
```

### üöÄ Resultado Esperado
- Pipeline completo de 7 agentes funcionando
- Valida√ß√£o rigorosa em cada etapa
- Execu√ß√£o Pyomo sandboxed
- Resultados v√°lidos para problemas simples

---

## üìã Bloco 6: Timeline e Progresso (Semana 7)

### üéØ Objetivo
Implementar interface de progresso e timeline do pipeline.

### üìù Tarefas

#### 6.1 Timeline Visual
- [ ] Criar timeline horizontal
- [ ] Mostrar progresso em tempo real
- [ ] Implementar √≠cones para cada agente
- [ ] Adicionar anima√ß√µes de progresso

#### 6.2 Pain√©is de Detalhes
- [ ] Implementar pain√©is laterais para cada agente
- [ ] Mostrar JSON de sa√≠da de cada etapa
- [ ] Exibir LaTeX do agente matem√°tico
- [ ] Mostrar c√≥digo Pyomo gerado

#### 6.3 Estados de Progresso
- [ ] Implementar estados: pendente, executando, completo, erro
- [ ] Adicionar spinners durante execu√ß√£o
- [ ] Mostrar tempo de execu√ß√£o
- [ ] Implementar cancelamento

#### 6.4 Feedback em Tempo Real
- [ ] Atualizar progresso em tempo real
- [ ] Mostrar mensagens de status
- [ ] Implementar notifica√ß√µes
- [ ] Adicionar logs visuais

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_6():
    # 1. Timeline funciona
    assert shows_progress_visually() == True
    assert updates_in_real_time() == True
    
    # 2. Detalhes acess√≠veis
    assert can_view_agent_details() == True
    assert shows_json_latex_code() == True
    
    # 3. Estados corretos
    assert shows_correct_states() == True
    assert handles_errors_in_timeline() == True
```

### üöÄ Resultado Esperado
- Timeline visual funcional
- Progresso em tempo real
- Detalhes de cada etapa acess√≠veis
- Interface profissional e informativa

---

## üìã Bloco 7: Resultados e Insights (Semana 8)

### üéØ Objetivo
Implementar p√°gina de resultados finais com insights e downloads.

### üìù Tarefas

#### 7.1 P√°gina de Resultados
- [ ] Criar p√°gina de resultados
- [ ] Mostrar valor √≥timo da fun√ß√£o objetivo
- [ ] Exibir tabela de vari√°veis e valores
- [ ] Implementar visualiza√ß√µes b√°sicas

#### 7.2 Insights de Neg√≥cio
- [ ] Exibir insights do agente interpretador
- [ ] Destacar restri√ß√µes binding
- [ ] Mostrar recomenda√ß√µes
- [ ] Implementar formata√ß√£o rica

#### 7.3 Downloads e Exporta√ß√£o
- [ ] Implementar download do c√≥digo Pyomo
- [ ] Gerar PDF do modelo LaTeX
- [ ] Exportar resultados em JSON
- [ ] Criar relat√≥rio executivo

#### 7.4 Hist√≥rico de Jobs
- [ ] Implementar salvamento de jobs
- [ ] Criar lista de jobs anteriores
- [ ] Permitir reexecu√ß√£o de jobs
- [ ] Implementar filtros e busca

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_7():
    # 1. Resultados exibidos
    assert shows_optimal_value() == True
    assert shows_variable_values() == True
    
    # 2. Downloads funcionam
    assert can_download_pyomo_code() == True
    assert can_download_results_json() == True
    
    # 3. Hist√≥rico funciona
    assert saves_jobs_to_history() == True
    assert can_reexecute_previous_jobs() == True
```

### üöÄ Resultado Esperado
- P√°gina de resultados completa
- Insights de neg√≥cio claros
- Downloads funcionando
- Hist√≥rico de jobs operacional

---

## üìã Bloco 8: Otimiza√ß√µes e Produ√ß√£o (Semana 9-10)

### üéØ Objetivo
Otimizar performance, adicionar recursos avan√ßados e preparar para produ√ß√£o.

### üìù Tarefas

#### 8.1 Otimiza√ß√µes de Performance
- [ ] Implementar cache de resultados
- [ ] Otimizar chamadas de API
- [ ] Reduzir tempo de resposta
- [ ] Implementar lazy loading

#### 8.2 Tratamento Robusto de Erros
- [ ] Implementar retry autom√°tico
- [ ] Adicionar fallback de solvers
- [ ] Melhorar mensagens de erro
- [ ] Implementar logging detalhado

#### 8.3 Recursos Avan√ßados
- [ ] Adicionar suporte a problemas estoc√°sticos
- [ ] Implementar m√∫ltiplos solvers
- [ ] Adicionar templates de problemas
- [ ] Implementar compara√ß√£o de solu√ß√µes

#### 8.4 Prepara√ß√£o para Produ√ß√£o
- [ ] Configurar monitoramento
- [ ] Implementar m√©tricas
- [ ] Otimizar para Streamlit Cloud
- [ ] Preparar documenta√ß√£o final

### ‚úÖ Crit√©rios de Sucesso (Testes)
```python
def test_bloco_8():
    # 1. Performance otimizada
    assert response_time_under_30s() == True
    assert cache_works_correctly() == True
    
    # 2. Erros tratados
    assert handles_solver_failures() == True
    assert provides_helpful_error_messages() == True
    
    # 3. Produ√ß√£o pronta
    assert monitoring_configured() == True
    assert documentation_complete() == True
```

### üöÄ Resultado Esperado
- Aplica√ß√£o otimizada e robusta
- Tratamento completo de erros
- Recursos avan√ßados funcionando
- Pronta para produ√ß√£o

---

## üß™ Estrat√©gia de Testes

### Testes por Bloco
Cada bloco deve incluir:
1. **Testes unit√°rios** para componentes individuais
2. **Testes de integra√ß√£o** para fluxos completos
3. **Testes de UI** para interface do usu√°rio
4. **Testes de performance** para valida√ß√£o de requisitos

### Crit√©rios de Progress√£o
Para avan√ßar para o pr√≥ximo bloco:
- ‚úÖ Todos os testes do bloco atual passando
- ‚úÖ Funcionalidade demonstrada em ambiente de produ√ß√£o
- ‚úÖ Documenta√ß√£o atualizada
- ‚úÖ C√≥digo revisado e limpo

### Testes de Regress√£o
- Manter suite de testes para blocos anteriores
- Executar testes completos antes de cada deploy
- Validar que novas funcionalidades n√£o quebram existentes

---

## üìä M√©tricas de Progresso

### Por Bloco
- **Bloco 1**: 12.5% do projeto
- **Bloco 2**: 25% do projeto
- **Bloco 3**: 37.5% do projeto
- **Bloco 4**: 50% do projeto
- **Bloco 5**: 75% do projeto
- **Bloco 6**: 87.5% do projeto
- **Bloco 7**: 100% do projeto
- **Bloco 8**: Otimiza√ß√µes e produ√ß√£o

### Indicadores de Sucesso
- **Funcionalidade**: Cada bloco deve estar 100% funcional
- **Qualidade**: Cobertura de testes >80%
- **Performance**: Tempo de resposta <30s
- **Usabilidade**: Interface intuitiva e responsiva

---

## üöÄ Deploy Cont√≠nuo

### Estrat√©gia
- Deploy ap√≥s cada bloco completo
- Testes automatizados antes do deploy
- Rollback r√°pido em caso de problemas
- Monitoramento cont√≠nuo em produ√ß√£o

### Ambientes
- **Desenvolvimento**: Local para desenvolvimento
- **Staging**: Streamlit Cloud para testes
- **Produ√ß√£o**: Streamlit Cloud para usu√°rios finais

---

## üìù Checklist de Implementa√ß√£o

### Antes de Come√ßar
- [ ] Ambiente Python configurado
- [ ] Conta OpenAI ativa
- [ ] Conta Streamlit Cloud
- [ ] Reposit√≥rio Git criado
- [ ] Documenta√ß√£o do blueprint lida

### Durante o Desenvolvimento
- [ ] Seguir ordem dos blocos
- [ ] Testar cada funcionalidade antes de avan√ßar
- [ ] Documentar decis√µes t√©cnicas
- [ ] Commitar c√≥digo regularmente
- [ ] Validar crit√©rios de sucesso

### Ap√≥s Cada Bloco
- [ ] Executar testes completos
- [ ] Deploy e valida√ß√£o em produ√ß√£o
- [ ] Atualizar documenta√ß√£o
- [ ] Revisar c√≥digo
- [ ] Planejar pr√≥ximo bloco

---

**Vers√£o**: 1.0  
**Data**: Junho 2025  
**Status**: Pronto para implementa√ß√£o 